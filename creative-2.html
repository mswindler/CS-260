<html>
<head>
<title>Lab 2 - swind6</title>
<script src="http://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
<script>
  $(document).ready(function(){
    $("#cityField").keyup(function(){
      var url="http://bioresearch.byu.edu/cs260/jquery/getcity.cgi?q="+$("#cityField").val();
      $.getJSON(url,function(data){var everything;everything="<ul>";
      $.each(data,function(i,item){everything+="<li> "+data[i].city;});everything+="</ul>";
      $("#txtHint").html(everything);});
      $("#txtHint").text("Keyup "+$("#cityField").val());});
      
     $("#weatherButton").click(function(e){
  var value = $("#cityField").val();
  e.preventDefault();
    $("#displayCity").text(value);
       
      var myurl= "https://api.wunderground.com/api/cb0a6b925c41b818/geolookup/conditions/q/UT/";
      myurl += value;
      myurl += ".json";
      console.log(myurl);
      $.ajax({
        url : myurl,
        dataType : "json",
        success : function(parsed_json) {
      var location = parsed_json['location']['city'];
      var temp_string = parsed_json['current_observation']['temperature_string'];
      var current_weather = parsed_json['current_observation']['weather'];
      everything = "<ul>";
      everything += "<li>Location: "+location;
      everything += "<li>Temperature: "+temp_string;
      everything += "<li>Weather: "+current_weather;
      everything += "</ul>";
      $("#weather").html(everything);
      }
  });
});                                
 $("#searchButton").click(function(f){
  var value = $("#searchStack").val();
  f.preventDefault();
    $("#searchResults").text(value);
       
      var myurl= "https://api.stackexchange.com/2.2/search?order=desc&sort=activity&intitle=";
      myurl += value;
      myurl += "&site=stackoverflow";
      myurl += "&pagesize=10";
      console.log(myurl);
      $.ajax({
        url : myurl,
        dataType : "json",
        success : function(parsed_json) {
          everything = "";
          for (var i = 0; i < 10; i++) {
            var title = parsed_json['items'][i]['title'];
            var owner = parsed_json['items'][i]['owner']['display_name'];
            var link = parsed_json['items'][i]['link'];
            var authorLink = parsed_json['items'][i]['owner']['link'];
            everything += "<div><h3>" + '<a href="' + link + '">' + title + "</a>" + "</h2>";
            everything += "<p>Author: " + '<a href="' + authorLink + '">' + owner + "</a>" + "</p></div>";
            if (i != 9) {
              everything += "<hr><br>";
            }
          }
            $("#searchResults").html(everything);
        }
      });
 });
});
  </script>
  <style>
    h1 {
      padding:50px;
    }
    input#searchStack, input#cityField {
      border-style: solid;
    }
    hr {
      border-width: 2px;
      border-style: solid;
      border-color: cyan;
    }
    div#searchResults div:hover {
      background-color: #00e2ff;
      padding: 3px;
      font-size: larger;
    }
    input#weatherButton:hover, input#searchButton:hover {
      background-color: cyan;
    }
    input:active, input:focus {
      background-color: cyan;
    }
    input {
      border-radius: 5px;
      border-width: 2px;
      border-style:double;
      border: #00e2ff;
      padding: 5px;
    }
    h2 {
      padding:30px;
    }
    body {
      margin:auto;
      width:85%;
      font-family:"Arial",sans-serif;
      border-width: 2px;
      border: #00e2ff;
      border-style: double;
      padding: 20px;
    }
    div#searchResults {
      margin: auto;
      width: 90%;
    }
    textarea#displayCity {
      border-width: 0;
    }
  </style>
</head>
<body>
  <div id="content">
  <h1>Welcome to my Lab 2</h1>
  <h2>Weather Finder</h2>
<form>
Enter A Utah City: <input type="text" placeholder="Saint George" id="cityField" value=""><br>
Suggestion: <span id="txtHint">Empty</span>
<input id="weatherButton" type="submit" value="Submit">
</form>
<p>City</p>
<textarea readonly="readonly" id="displayCity">No City</textarea>
<p>Current Weather</p>
<div id="weather">No weather</div>
  
  <h2>Stack Exchange Search</h2>
  <form>
Enter A Stack exchange term: <input type="text" id="searchStack" placeholder="Javascript..." value=""><br>
<input id="searchButton" type="submit" value="Submit">
</form>
<p>Stack exchange results</p>
  <div id="searchResults">No Results</div>
  </div>
</body>
</html>
